#include <stdio.h>
#include <stdlib.h>
#include <Jimmy_wm_audio/wm_scripts.h>
#include <Jimmy_wm_audio/actor.h>

using namespace intel_jimmy;

int actor(WM_script &jimmy_script, WM_teleop &jimmy_teleop) {

	char cmd[DIMCMD];

	if(!jimmy_teleop.CurState())
		return 0;

	printf("\n===== >>> Current Activate Level: %d\n", jimmy_teleop.CurState());

	switch(jimmy_teleop.CurState()) {

		case WM_teleop::WM_STA_EXIT :
			printf("===== <<< Jimmy is going to leave, bye!\n");
			system(jimmy_script.clc());
			return 1;
		case WM_teleop::WM_STA_PIC :
			system(jimmy_script.WM_get_vidnm(cmd));
			break;
		case WM_teleop::WM_STA_ACT :
			// TODO: add action index here;
			break;
		case WM_teleop::WM_STA_AUD :
			if(jimmy_teleop.IsReady() == 1) {
				system(jimmy_script.WM_end_audnm(cmd));
				system(jimmy_script.WM_get_audnm(cmd, jimmy_teleop.PlayIndex()));
			}
		case WM_teleop::WM_STA_INFO :
			system(jimmy_script.WM_get_txtnm(cmd, jimmy_teleop.PlayIndex()));
			jimmy_teleop.ResetState();
			break;
		default :
			return 0;
	}

	printf("===== <<< Section End\n");

	return 0;
}


